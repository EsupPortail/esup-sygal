# Version 5.2.9

## 1. Sur le serveur d'application

- Placez-vous dans le répertoire de l'application puis lancez la commande suivante
  pour installer la nouvelle version :

```bash
git fetch --tags && git checkout --force 5.2.9 && bash ./install.sh
```

- Selon le moteur PHP que vous avez installé, rechargez le service, exemple :
    - php7.4-fpm         : `service php7.4-fpm reload`
    - apache2-mod-php7.4 : `service apache2 reload`

## 2. Dans la base de données

```sql
-- MAJ RENDERER --------------------
alter table unicaen_renderer_template  add namespace varchar(256);

-- MACROS --------------------------
INSERT INTO unicaen_renderer_macro (code, description, variable_name, methode_name) VALUES ('These#Titre', null, 'these', 'getTitre');
INSERT INTO unicaen_renderer_macro (code, description, variable_name, methode_name) VALUES ('Url#RapporteurDashboard', '<p>Fourni l''url vers le darshboard du rapporteur passé en variable</p>', 'Url', 'getUrlRapporteurDashboard');


-- TEMPLATES -----------------------
INSERT INTO unicaen_renderer_template (code, description, document_type, document_sujet, document_corps, document_css, namespace) VALUES ('DEMANDE_ENGAGEMENT_IMPARTIALITE', '<p>Courrier électronique notifiant un·e futur·e rapporteur·e pour la signature de l''engagement d''impartialité.<br />Envoyé lors de l''appariement membre/acteur</p>', 'mail', 'Demande de signature de l''engagement d''impartialité de la thèse de VAR[Doctorant#Denomination]', '<p>-- Version française ---------------------------------------------------------------</p>
<p>Bonjour,</p>
<p>Afin de pouvoir devenir rapporteur de la thèse de <strong>VAR[Doctorant#Denomination]</strong> intitulée <strong>VAR[These#Titre]</strong>, il est nécessaire de signer électroniquement l\'engagement d\'impartialité dans l\'application <em>ESUP-SyGAL</em> :<strong> VAR[Url#RapporteurDashboard]</strong>.<br /><br />Vous accéderez ainsi à une page "index de la soutenance" listant les membres du jury.<br />Cliquez ensuite sur "accès à l’engagement d’impartialité".<br />Puis après avoir pris connaissance des conditions relatives à cet engagement, vous pourrez signer ou non cet engagement d’impartialité.<br />Si vous signez, vous pourrez alors télécharger le PDF du manuscrit de thèse.</p>
<p>Cordialement<br /><br />-- English version ------------------------------------------------------------------<br /><br />Dear Mrs/Mr,</p>
<p>Before being officially registered as an external referee for the PhD thesis presented by <strong>VAR[Doctorant#Denomination]</strong> entitled <strong>VAR[These#Titre]</strong>, you have to sign the "impartiality commitment" available in your dashborad : <strong>VAR[Url#RapporteurDashboard]</strong>.<br /><br />You will then be connected to a web page entitled "index of the PhD defense" listing the PhD jury members.<br />Click then on "access to the impartiality commitment".<br />Then, after reading the requirements regarding the impartiality commitment of an external referee, you sign it or not.<br />If you sign it, you will be able to download the PDF version of the PhD manuscript.</p>
<p>Best regards,</p>
<p>-- Justification ----------------------------------------------------------------------<br /><br />Vous avez reçu ce mail car :</p>
<ul>
<li>vous avez été désigné rapporteur pour la thèse de VAR[Doctorant#Denomination]</li>
<li>la signature a été annulée<br /><br /></li>
</ul>', null, 'Soutenance\Provider\Template');
INSERT INTO public.unicaen_renderer_template (code, description, document_type, document_sujet, document_corps, document_css, namespace) VALUES ('SIGNATURE_ENGAGEMENT_IMPARTIALITE', '<p>Courrier électronique envoyé vers les maisons du doctorat lors de la signature de l''engagement d''impartialité par un rapporteur</p>', 'mail', 'Signature de l''engagement d''impartialité de la thèse de VAR[Doctorant#Denomination] par VAR[Membre#Denomination]', e'<p>Bonjour,</p>
<p><strong>VAR[Membre#Denomination]</strong> vient de signer l\'engagement d\'impartialité de la thèse de <strong>VAR[Doctorant#Denomination]</strong> intitulée <strong>VAR[These#Titre]</strong>.</p>
<p>-- Justification ----------------------------------------------------------------------<br /><br />Vous avez reçu ce mail car :</p>
<ul>
<li>le rapporteur VAR[Membre#Denomination] vient de signer l\'engagement d\'impartialité; </li>
<li>vous êtes un gestionnaire de la maison du doctorat de l\'établissement d\'inscription du doctorant . <br /><br /></li>
</ul>', null, 'Soutenance\Provider\Template');
INSERT INTO public.unicaen_renderer_template (code, description, document_type, document_sujet, document_corps, document_css, namespace) VALUES ('REFUS_ENGAGEMENT_IMPARTIALITE', '<p>Courrier électronique envoyé lors du refus de l''engagement d''impartialité</p>', 'mail', 'Refus de l''engagement d''impartialité de la thèse de VAR[Doctorant#Denomination] par VAR[Membre#Denomination]', e'<p>Bonjour,</p>
<p><strong>VAR[Membre#Denomination]</strong> vient de refuser l\'engagement d\'impartialité de la thèse de <strong>VAR[Doctorant#Denomination]</strong> intitulée <strong>VAR[These#Titre]</strong>.</p>
<p>-- Justification ----------------------------------------------------------------------</p>
<p>Vous avez reçu ce mail car :</p>
<ul>
<li>le rapporteur VAR[Membre#Denomination] vient de refuser de signer l\'engagement d\'impartialité;</li>
<li>vous êtes :
<ul>
<li>soit un des acteurs directs de la thèse de VAR[Doctorant#Denomination],</li>
<li>soit un gestionnaire de la maison du doctorat de l\'établissement d\'inscription du doctorant.<br />            <br /><br /></li>
</ul>
</li>
</ul>', null, 'Soutenance\Provider\Template');
INSERT INTO public.unicaen_renderer_template (code, description, document_type, document_sujet, document_corps, document_css, namespace) VALUES ('ANNULATION_ENGAGEMENT_IMPARTIALITE', '<p>Courrier électronique envoyé lors de l''annulation d''un engagement d''impartialité</p>', 'mail', 'Annulation de la signature de l''engagement d''impartialité de VAR[Membre#Denomination] pour la thèse de VAR[Doctorant#Denomination]', e'<p>Bonjour,</p>
<p><br />Votre signature de l\'engagement d\'impartialité de la thèse de <strong>VAR[Doctorant#Denomination]</strong> intitulée <strong>VAR[These#Titre]</strong> vient d\'être annulée.</p>
<p>-- Justification ----------------------------------------------------------------------</p>
<p>Vous avez reçu ce mail car :</p>
<ul>
<li>vous avez signé l\'engagement d\'impartialité pour la thèse de VAR[Doctorant#Denomination];  </li>
<li>la signature a été annulée. </li>
</ul>', null, 'Soutenance\Provider\Template');


```